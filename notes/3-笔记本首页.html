<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>我的笔记本</title>
		<link rel="stylesheet" href="../css/public/global.css">
		<link rel="stylesheet" href="../css/public/public.css">
		<link rel="stylesheet" href="../css/notes/note.css">
		<script type="text/javascript" src="../js/public/jquery-1.8.2.min.js"></script>
		<script type="text/javascript" src="../js/public/placeholder.js"></script>
	</head>
	<body>
		<div class="header">
			<div class="w1305pxAuto inner clearfix">
				<div class="left logo">
					<a href="">大智作</a>
					<span class="subtitle">学习&nbsp;&nbsp;写作&nbsp;&nbsp;报告</span>
				</div>
				<div class="left nav">
					<a href="" class="cur">我的</a>
					<a href="">发现</a>
				</div>
				<div class="right account">
					<span class="username">许馨</span>
					<span>[ <a href="">退出</a> ]</span>
				</div>
			</div>
		</div>
		<div class="main clearfix">
			<div class="left sidebar">
				<div class="profile">
					<div class="avatar">
						<img src="../imagesTemp/notes/index-avatar.jpg" width="100" height="100" alt="">
					</div>
					<div class="name tc">许欣</div>
				</div>
				<div class="sidenav">
					<div class="item cur">
						<h2>首页</h2>
					</div>
					<div class="item item2">
						<h2>我的智作</h2>
						<ul>
							<li><a href="">我的写作</a></li>
							<li><a href="">我的报告</a></li>
							<li><a href="">我的成果</a></li>
						</ul>
					</div>
					<div class="item item3">
						<h2>我的笔记</h2>
						<ul>
							<li><a href="">我的笔记</a></li>
							<li><a href="">我的笔记本</a></li>
						</ul>
					</div>
					<div class="item item4">
						<h2>我的素材库</h2>
						<ul>
							<li><a href="">搜索CNKI素材库</a></li>
							<li><a href="">我的CNKI素材库</a></li>
							<li><a href="">我的原创素材库</a></li>
							<li><a href="">我的多媒体素材库</a></li>
							<li><a href="">我的百科素材库</a></li>
						</ul>
					</div>
					<div class="item item5">
						<h2><a href="">回收站</a></h2>
					</div>
				</div>
			</div>
			<div class="left wrap noteWrap">
				<div class="module mynotebook">
					<div class="module-hd">
						<div class="left tabnav">
							<span>笔记</span>
							<span class="cur">笔记本</span>
						</div>
						<div class="right search clearfix">
							<div class="left searchbox clearfix">
								<input type="text" placeholder="查找笔记本">
								<input type="button">
							</div>
						</div>
						<a href="" class="right createBtn">新建笔记</a>
					</div>
					<div class="module-bd pd0">
						<div class="category clearfix">
							<div class="left list">
								<h4 class="left">全部笔记本（21）</h4>
								<a href="javascript:;" class="left addbtn tc">+</a>
								<span class="item"><span class="text">未分类</span><input type="text"></span>
								<span class="item"><span class="text">图片整理</span><input type="text"></span>
								<span class="item cur"><span class="text">英语每日一练</span><input type="text"></span>
								<span class="item"><span class="text">产品知识积累</span><input type="text"></span>
								<span class="item"><span class="text">绘画基础练习练习</span><input type="text"></span>
								<span class="item"><span class="text">绘画基础练习</span><input type="text"></span>
								<span class="item"><span class="text">绘画基础练习</span><input type="text"></span>
								<span class="item"><span class="text">绘画基础练习</span><input type="text"></span>
								<span class="item"><span class="text">绘画基础练习</span><input type="text"></span>
							</div>
							<a href="javascript:;" class="left foldbtn"></a>
							<a href="javascript:;" class="left editbtn tc">编辑</a>
						</div>
						<div class="notebookList clearfix">
							<div class="item new"></div>
							<div class="item">
								<div class="staple"></div>
								<a href=""><img src="../imagesTemp/notes/cover.jpg" alt=""></a>
								<h2><a href="">小学教育</a></h2>
								<div class="action">
									<span class="edit"></span>
									<span class="transfer"></span>
									<span class="del"></span>
								</div>
								<span class="preview active"></span>
							</div>
							<div class="item">
								<div class="staple"></div>
								<a href=""><img src="../imagesTemp/notes/cover.jpg" alt=""></a>
								<h2><a href="">小学教育</a></h2>
								<div class="action">
									<span class="edit"></span>
									<span class="transfer"></span>
									<span class="del"></span>
								</div>
								<span class="preview"></span>
							</div>
							<div class="item">
								<div class="staple"></div>
								<a href=""><img src="../imagesTemp/notes/cover.jpg" alt=""></a>
								<h2><a href="">小学教育</a></h2>
								<div class="action">
									<span class="edit"></span>
									<span class="transfer"></span>
									<span class="del"></span>
								</div>
								<span class="preview"></span>
							</div>
							<div class="item">
								<div class="staple"></div>
								<a href=""><img src="../imagesTemp/notes/cover.jpg" alt=""></a>
								<h2><a href="">小学教育</a></h2>
								<div class="action">
									<span class="edit"></span>
									<span class="transfer"></span>
									<span class="del"></span>
								</div>
							</div>
							<div class="item">
								<div class="staple"></div>
								<a href=""><img src="../imagesTemp/notes/cover.jpg" alt=""></a>
								<h2><a href="">小学教育</a></h2>
								<div class="action">
									<span class="edit"></span>
									<span class="transfer"></span>
									<span class="del"></span>
								</div>
								<span class="preview"></span>
							</div>
							<div class="item">
								<div class="staple"></div>
								<a href=""><img src="../imagesTemp/notes/cover.jpg" alt=""></a>
								<h2><a href="">小学教育</a></h2>
								<div class="action">
									<span class="edit"></span>
									<span class="transfer"></span>
									<span class="del"></span>
								</div>
								<span class="preview"></span>
							</div>
							<div class="item">
								<div class="staple"></div>
								<a href=""><img src="../imagesTemp/notes/cover.jpg" alt=""></a>
								<h2><a href="">小学教育</a></h2>
								<div class="action">
									<span class="edit"></span>
									<span class="transfer"></span>
									<span class="del"></span>
								</div>
								<span class="preview"></span>
							</div>
							<div class="item">
								<div class="staple"></div>
								<a href=""><img src="../imagesTemp/notes/cover.jpg" alt=""></a>
								<h2><a href="">小学教育</a></h2>
								<div class="action">
									<span class="edit"></span>
									<span class="transfer"></span>
									<span class="del"></span>
								</div>
								<span class="preview"></span>
							</div>
							<div class="item">
								<div class="staple"></div>
								<a href=""><img src="../imagesTemp/notes/cover.jpg" alt=""></a>
								<h2><a href="">小学教育</a></h2>
								<div class="action">
									<span class="edit"></span>
									<span class="transfer"></span>
									<span class="del"></span>
								</div>
								<span class="preview"></span>
							</div>
							<div class="item">
								<div class="staple"></div>
								<a href=""><img src="../imagesTemp/notes/cover.jpg" alt=""></a>
								<h2><a href="">小学教育</a></h2>
								<div class="action">
									<span class="edit"></span>
									<span class="transfer"></span>
									<span class="del"></span>
								</div>
								<span class="preview"></span>
							</div>
							<div class="item">
								<div class="staple"></div>
								<a href=""><img src="../imagesTemp/notes/cover.jpg" alt=""></a>
								<h2><a href="">小学教育</a></h2>
								<div class="action">
									<span class="edit"></span>
									<span class="transfer"></span>
									<span class="del"></span>
								</div>
								<span class="preview"></span>
							</div>
							<div class="item">
								<div class="staple"></div>
								<a href=""><img src="../imagesTemp/notes/cover.jpg" alt=""></a>
								<h2><a href="">小学教育</a></h2>
								<div class="action">
									<span class="edit"></span>
									<span class="transfer"></span>
									<span class="del"></span>
								</div>
								<span class="preview"></span>
							</div>
							<div class="item">
								<div class="staple"></div>
								<a href=""><img src="../imagesTemp/notes/cover.jpg" alt=""></a>
								<h2><a href="">小学教育</a></h2>
								<div class="action">
									<span class="edit"></span>
									<span class="transfer"></span>
									<span class="del"></span>
								</div>
								<span class="preview"></span>
							</div>
							<div class="item">
								<div class="staple"></div>
								<a href=""><img src="../imagesTemp/notes/cover.jpg" alt=""></a>
								<h2><a href="">小学教育</a></h2>
								<div class="action">
									<span class="edit"></span>
									<span class="transfer"></span>
									<span class="del"></span>
								</div>
								<span class="preview"></span>
							</div>
						</div>
						<div class="page tc">
							<a href="" class="cur">1</a>
							<a href="">2</a>
							<a href="">3</a>
							<a href="">4</a>
							<a href="">5</a>
							<span>...</span>
							<a href="">下一页</a>
							<a href="">尾页</a>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script>
			// 左右高度自适应 
			var sHeight=$('.sidebar').height();
			var cHeight=$('.wrap').height();
			var arrHeight=[sHeight,cHeight];
			var maxHeight=Math.max.apply(null,arrHeight);
			$('.sidebar').height(maxHeight);
			$('.wrap').height(maxHeight);

			// 下拉
			$('.dropdown p').mouseenter(function () {
				$(this).siblings('ul').slideDown(200);
			});
			$('.dropdown').mouseleave(function () {
				$(this).find('ul').slideUp(200);
			});


			var category=$('.mynotebook .category');
			var editBtn=category.find('.editbtn');
			var delBtn=category.find('.delbtn');
			var addBtn=category.find('.addbtn');
			var saveBtn=category.find('.savebtn');
			var foldBtn=category.find('.foldbtn');
			var cateItem=category.find('.item');
			var flag=true;
			// 编辑
			editBtn.on('click',function () {
				flag=true;
				var item=$(this).siblings('.list').children('.item');
				item.find('.delbtn').remove().end().append('<span class="delbtn"></span>');

				// 修改文字
				cateItem.on('click',function () {
					if(flag){
						var txt=$(this).find('.text').html();
						$(this).find('.text').hide().siblings('input').show().val(txt);
					}
				});
				
			});


			category.on('blur','input:not(.add input)',function () {
				var val=$.trim($(this).val());
				$(this).hide().siblings('.text').show().html(val);
				$('.mynotebook .category .delbtn').remove();
				flag=false;
			});

			// 删除
			category.on('click','.delbtn',function () {
				$(this).parent('.item').remove();
			});

			// 添加
			addBtn.on('click',function () {
				var addbox=$('<span class="item add"><span class="text" style="display:none;"></span><input type="text" style="display:block;"/><span class="savebtn"></span><span class="cancelbtn"></span></span>');
				$(this).after(addbox);
			});

			// 保存
			category.on('click','.savebtn',function () {
				var val=$.trim($(this).siblings('input').val());
				if(val){
					$(this).parent('.item.add').removeClass('add').find('.text').html(val);
					$(this).siblings(".text").show()
					$(this).siblings("input").hide()
					$(this).siblings(".cancelbtn").remove()
					$(this).remove();
				}
			});
			//取消
			category.on('click','.cancelbtn',function () {
					$(this).parent().remove()
				})
			// 展开折叠
			var k=0;
			foldBtn.click(function () {
				if(k==0){
					$(this).addClass('unfoldbtn').siblings('.list').css('height','auto');
					k=1;
				}else if(k==1){
					$(this).removeClass('unfoldbtn').siblings('.list').css('height','36px');
					k=0;
				}
			});

			$('.mynotebook .notebookList .item').hover(function () {
				$(this).find('.action').toggle().siblings('.preview').toggle();
			})
		</script>
	</body>
</html>